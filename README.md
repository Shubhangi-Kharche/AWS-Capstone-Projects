# AWS-Capstone-Projects
**AWS Capstone 1**
Send Fanout Event Notifications with Amazon Simple Queue Service (SQS) and Amazon Simple Notification Service (SNS)
A.	Implemented Solution Architecture diagram with detailed explanation for each component / service used.	

Send Fanout Event Notifications with Amazon Simple Queue Service (SQS) and Amazon Simple Notification Service (SNS):
This use case is implemented in two ways:
I)	Without SNS message Filtering
In this scenario, identical messages are "pushed" to multiple subscribers, which eliminates the need to periodically check or poll for updates and enables parallel asynchronous processing of the message by the subscribers.

II)	With SNS message Filtering
Types of message filtering:
•	Topic-based filtering
•	Attribute Based filtering

message filtering functionality for SNS simplifies the pub/sub messaging architecture by offloading the filtering logic from subscribers, as well as the routing logic from publishers, to SNS.
Components/Services Used:
•	Amazon SNS: Fully managed publish/subscribe service for Application to Person (A2P) and Application to Application (A2A) messaging. This service is available in AWS free tier. 
o	SNS message publisher: Sends a message to an Amazon SNS topic, a text message (SMS message) directly to a phone number, or a message to a mobile platform endpoint
o	SNS Topic: An Amazon SNS topic is a logical access point that acts as a communication channel. 
o	SNS endpoints: SNS supports multiple endpoints such as AWS Lambda, Amazon SQS, HTTP/S, Mobile SMS or an email address.
o	JSON Script: SNS uses JSON script to publish a topic. JSON script defines which conditions an event must meet in order to be published to a topic.
•	Amazon SQS: Fully managed message queuing for microservices, distributed systems, and serverless applications. This service is available in AWS free tier. 
•	AWS Lambda: Its a serverless compute service from AWS. It is used as an endpoint in SNS application service to process the notifications.
•	Amazon CloudWatch:  It’s a monitoring service from AWS. It is used to monitor logs generated by AWS lambda.
•	Amazon IAM role: This service helps to assign permission policies that determine what the identity/component can and cannot do in AWS e.g. Amazon SNS and Amazon CloudWatch services can be assigned full access permissions to Amazon lambda. 

D.	Lessons & Observations

•	SNS is an application service that is used to send identical messages to various endpoints viz; Amazon SQS, Amazon lambda, Amazon kinesis data firehose, email/email JSON, HTTP/HTTPs, mobile SMS.
•	Learnt that SNS has message filtering capability: 1) filtering based on topics and  2) filtering based on conditions defined in JSON scripts.
•	SNS sets asynchronous communication with endpoints over Internet
•	SNS and SQS services are free up to million requests per month
•	Learnt to create IAM role for AWS lambda to have full access to SNS and cloudwatch.
•	Learnt to read cloudwatch logs
•	Learnt to edit JSON scripts.
•	Learnt SNS and SQS as publish subscribe application services
•	Learnt to estimate cost for each service
•	Learnt that Amazon SNS supports IoT protocol like MQTT
•	AWS application services like SNS and SQS are used to send bulk messages from ecommerce websites, BFSI websites etc

**AWS Capstone 2**
Containerizing Lambda deployments using OCI container images
Steps for Lambda Containerization using OCI Images:
•	Configure EC2
•	Use SSH to securely login to EC2
•	Securely copy files required to build docker image on EC2
•	Configure ECR with a private repository to store docker image
•	Push the Docker image from EC2 to a private repository in ECR
•	Create Lambda function in ECR: Build and tag the lambda function
•	Invoke the Lambda Function
•	Access Lambda function using API Gateway
Components/Services Used:
•	Amazon EC2: Compute service from AWS. Used as a local machine to process files required to build container image.
•	Amazon ECR: used to store the container image in private repository
•	Amazon IAM: Used for permissions
•	Amazon Lambda:  Serverless compute service from AWS. Used to deploy container image. There are 3 ways to create lambda function;1) author from scratch 2) use a blueprint and 3) use container image.
•	API Gateway: To make deployed image accessible 
•	Python and Text files required to build container image:
o	Requirements.txt file contains all packages that are required in app.py file
o	app.py file imports all packages required to build lambda function. It defines a function lambda_handler. The handler function accepts two arguments; event and context. The event argument retrieves the data that is passed to execute the lambda function. For e.g. if the lambda function is triggered using HTTP API call via API Gateway then the event calls for all parameters required for HTTP API call (resource, path, method, resource path, headers etc). The context argument provides the data about the execution environment of the lambda function. The lambda_handler function must have a return value that depends on the invocation type. For example statusCode 200 is returned when lambda function is invoked using HTTP API call indicating that the request for invoking lambda is successful. StatusCode 200 is success response code. The meaning of a success depends on the HTTP request method: GET : The resource has been fetched and is transmitted in the message body (Hello from Lambda Containers).
o	Dockerfile contains python 3.8 lambda base image which is picked up from public.ecr.aws. The Dockerfile installs all packages and dependencies included in requirements.txt file. It copies the app.py to the container and sets the command for app.handler.

D.	Lessons & Observations
•	Learnt that there are 3 ways to create lambda function;1) author from scratch 2) use a blueprint and 3) use container image.
•	Learnt to create lambda function from container image in details
•	Learnt to use API Gateway for accessing deployed image 
•	Learnt to build container image using following 3 files:
a.	Requirements.txt file contains all packages that are required in app.py file
b.	app.py file imports all packages required to build lambda function. It defines a function lambda_handler. The handler function accepts two arguments; event and context. The event argument retrieves the data that is passed to execute the lambda function. For e.g. if the lambda function is triggered using HTTP API call via API Gateway then the event calls for all parameters required for HTTP API call (resource, path, method, resource path, headers etc). The context argument provides the data about the execution environment of the lambda function. The lambda_handler function must have a return value that depends on the invocation type. For example statusCode 200 is returned when lambda function is invoked using HTTP API call indicating that the request for invoking lambda is successful. StatusCode 200 is success response code. The meaning of a success depends on the HTTP request method: GET : The resource has been fetched and is transmitted in the message body (Hello from Lambda Containers).
c.	Dockerfile contains python 3.8 lambda base image which is picked up from public.ecr.aws. The Dockerfile installs all packages and dependencies included in requirements.txt file. It copies the app.py to the container and sets the command for app.handler.
•	Learnt Docker push commands to push built docker container image from EC2 to ECR
•	Learnt to create private ECR
•	Learnt to troubleshoot errors while using push commands
•	Learnt to create IAM role for EC2 to provide full access to AWS Lambda
•	Learnt to estimate cost for each service
•	Lambda is a serverless compute service from AWS
